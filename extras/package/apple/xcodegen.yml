name: VLC
options:
  bundleIdPrefix: org.videolan.vlc
  deploymentTarget:
    iOS: 9.0
targets:
  VLCAutomake:
    type: ""
    platform: ${VLC_PLATFORM}
    legacy:
      toolPath: /usr/bin/make
      passSettings: true
      attributes: $(ACTIONS)
      workingDirectory: ${VLC_BUILD_DIR}
    sources:
      - path: "${VLC_SRC_DIR}/src"
        excludes: "**/Makefile.in"
      - path: "${VLC_SRC_DIR}/include"
        excludes: "**/Makefile.in"
      - path: "${VLC_SRC_DIR}/modules"
        excludes: "**/Makefile.in"

  vlccoreios:
    type: "application"
    platform: ${VLC_PLATFORM}
    dependencies:
      - target: VLCAutomake
    info:
      path: "vlccoreios/Info.plist"
    sources:
      - path: ${VLC_BUILD_DIR}/test/vlccoreios
        type: file
        optional: true
        attributes:
          - CodeSignOnCopy
        buildPhase:
          copyFiles:
            destination: executables

  vlccoreiostuner:
    type: "application"
    platform: ${VLC_PLATFORM}
    dependencies:
      - target: VLCAutomake
    info:
      path: "vlccoreiostuner/Info.plist"
    sources:
      - path: ${VLC_BUILD_DIR}/test/vlccoreiostuner
        type: file
        optional: true
        attributes:
          - CodeSignOnCopy
        buildPhase:
          copyFiles:
            destination: executables

  vlc_static_modules:
    type: "library.static"
    platform: ${VLC_PLATFORM}
    dependencies:
      - target: VLCAutomake
    sources:
      - path: ${VLC_BUILD_DIR}/modules/.libs/libvlc_static_modules.a
        optional: true
        buildPhase:
          copyFiles:
            destination: productsDirectory

  vlc:
    type: "library.static"
    platform: ${VLC_PLATFORM}
    dependencies:
      - target: VLCAutomake
    sources:
      - path: ${VLC_BUILD_DIR}/lib/.libs/libvlc.a
        optional: true
        buildPhase:
          copyFiles:
            destination: productsDirectory

  vlccore:
    type: "framework"
    platform: ${VLC_PLATFORM}
    dependencies:
      - target: VLCAutomake
    sources:
      - path: ${VLC_BUILD_DIR}/src/.libs/libvlccore.dylib
        optional: true
        buildPhase:
          copyFiles:
            destination: productsDirectory
      - path: ${VLC_SRC_DIR}/include/
        includes: "vlc_*.h"
        buildPhase: headers
        headerVisibility: public
